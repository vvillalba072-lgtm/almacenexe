<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAXIALMACENEXE | Almacén y Variedades</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bungee&family=Outfit:wght@300;400;600;800&display=swap');

        :root {
            --primary: #FF3D00;
            --secondary: #3D5AFE;
            --dark: #121212;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            overflow-x: hidden;
        }

        h1, h2, h3, .logo-font { font-family: 'Bungee', cursive; }

        .nav-link { position: relative; font-weight: 600; transition: color 0.3s; }
        .nav-link::after {
            content: ''; position: absolute; width: 0; height: 2px;
            bottom: -4px; left: 0; background-color: var(--primary);
            transition: width 0.3s;
        }
        .nav-link:hover::after { width: 100%; }

        .cart-drawer {
            transform: translateX(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }
        .cart-drawer.open { transform: translateX(0); }

        .product-card {
            background: white;
            border-radius: 20px;
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
        }
        
        .btn-visible {
            background: var(--dark);
            color: white;
            padding: 10px;
            border-radius: 12px;
            font-weight: 800;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .marquee {
            white-space: nowrap;
            overflow: hidden;
            background: var(--primary);
            color: white;
            padding: 10px 0;
            font-weight: bold;
        }
        .marquee-content {
            display: inline-block;
            animation: marquee 30s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .success-card {
            background: white;
            padding: 3rem;
            border-radius: 30px;
            box-shadow: 0 0 0 10px rgba(255, 61, 0, 0.1), 0 20px 50px rgba(0,0,0,0.2);
        }

        .btn-bounce:active { transform: scale(0.95); }
        .hide-scroll::-webkit-scrollbar { display: none; }
        
        .how-to-card {
            transition: transform 0.3s ease;
        }
        .how-to-card:hover {
            transform: translateY(-5px);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .page { padding-bottom: 5rem; }
        }
     /* 1. LA VENTANA PRINCIPAL (MODAL CENTRADO) */
.cart-drawer {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.9); /* Centrado perfecto */
    width: 90%;
    max-width: 500px; /* Ancho máximo en PC */
    max-height: 85vh; /* Que no se pase del alto de la pantalla */
    background: white;
    border-radius: 25px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    z-index: 2000;
    display: none; /* Se activa con la clase .open */
    flex-direction: column;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid #e2e8f0;
}

.cart-drawer.open {
    display: flex;
    transform: translate(-50%, -50%) scale(1);
}

/* Fondo oscuro para resaltar la ventana */
.cart-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px); /* Efecto de desenfoque atrás */
    z-index: 1999;
    display: none;
}
.cart-overlay.open { display: block; }

/* 2. CABECERA INTEGRADA (Más fina) */
.cart-header {
    background: var(--primary);
    color: white;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.cart-header h2 { margin: 0; font-size: 1.2rem; }

/* 3. ÁREA DE PRODUCTOS (Limpia y con scroll suave) */
#cart-items {
    flex-grow: 1;
    overflow-y: auto;
    padding: 15px;
    background: #fdfdfd;
}

/* 4. BLOQUE DE DATOS Y PAGO (Compacto y unificado) */
.cart-footer {
    padding: 15px 20px !important;
    background: white;
    border-top: 2px solid #f1f1f1;
}

.cart-body input, .cart-body select {
    width: 100%;
    margin-bottom: 8px !important;
    padding: 10px !important;
    border: 1px solid #ddd !important;
    border-radius: 10px !important;
    font-size: 14px !important;
}

.delivery-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-bottom: 10px;
}

/* El botón de WhatsApp ahora es parte de la ventana */
.btn-whatsapp {
    background: #25d366 !important;
    color: white !important;
    width: 100% !important;
    padding: 12px !important;
    font-size: 15px !important;
    font-weight: bold !important;
    border-radius: 12px !important;
    border: none !important;
}

/* Ajustes para móviles */
@media (max-width: 500px) {
    .cart-drawer {
        width: 95%;
        max-height: 90vh;
    }
}
    </style>
</head>
<body class="pb-20 md:pb-0">

    <!-- MARQUEE -->
    <div class="marquee bg-red-600 border-b border-black/10 fixed top-0 w-full z-[60] md:relative">
        <div class="marquee-content uppercase tracking-tighter text-xs md:text-sm">
            🔥 ¡OFERTAS QUE QUEMAN! - YERBA PLAYADITO 30% OFF - MALBEC RESERVA 2X1 - BIJOUTERIE RECIÉN LLEGADA - ENVÍO GRATIS EN TU BARRIO - KIOSKO 24HS 🔥
        </div>
    </div>

    <!-- HEADER DESKTOP -->
    <header class="hidden md:block bg-white border-b sticky top-0 z-50">
        <div class="container mx-auto px-6 h-20 flex justify-between items-center">
            <div class="logo-font text-3xl text-orange-600 cursor-pointer" onclick="showPage('inicio')">ALMA</div>
            <nav class="flex gap-8">
                <button onclick="showPage('inicio')" class="nav-link hover:text-orange-600 uppercase">Tienda</button>
                <button onclick="showPage('folleto')" class="nav-link hover:text-orange-600 uppercase">Folleto</button>
                <button onclick="showPage('nosotros')" class="nav-link hover:text-orange-600 uppercase">Nosotros</button>
                <button onclick="showPage('como-comprar')" class="nav-link hover:text-orange-600 uppercase">¿Cómo comprar?</button>
            </nav>
            <div class="flex items-center gap-4">
                <div class="relative">
                    <input type="text" id="search-input" oninput="handleSearch()" placeholder="Buscar producto..." class="bg-gray-100 border-none rounded-full px-4 py-2 text-sm focus:ring-2 focus:ring-orange-600 outline-none w-48 transition-all focus:w-64">
                    <i class="fas fa-search absolute right-3 top-2.5 text-gray-400"></i>
                </div>
                <button onclick="toggleCart()" class="cerrar-btn">CERRAR</button>
                    <i class="fas fa-shopping-basket"></i>
                    <span id="cart-total-header">$0</span>
                </button>
            </div>
        </div>
    </header>

    <!-- HEADER MOBILE -->
    <header class="md:hidden bg-white p-4 sticky top-8 z-50 flex flex-col gap-3 border-b shadow-sm">
        <div class="flex justify-between items-center">
            <span class="logo-font text-2xl text-orange-600" onclick="showPage('inicio')">MAXIALMACENEXE</span>
            <div class="flex gap-3">
                <button onclick="showPage('como-comprar')" class="text-gray-400 p-2"><i class="fas fa-question-circle text-xl"></i></button>
                <button onclick="toggleCart()" class="cerrar-btn">CERRAR</button>
                    <i class="fas fa-shopping-basket text-xl text-orange-600"></i>
                    <span id="cart-badge-mobile" class="absolute -top-1 -right-1 bg-red-600 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center font-bold">0</span>
                </button>
            </div>
        </div>
        <div class="relative">
            <input type="text" id="search-input-mobile" oninput="handleSearch()" placeholder="¿Qué buscás hoy?" class="w-full bg-gray-100 border-none rounded-xl px-4 py-2 text-sm outline-none">
            <i class="fas fa-search absolute right-3 top-2.5 text-gray-400"></i>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="container mx-auto min-h-screen pt-12 md:pt-0">
        
        <!-- SECCIÓN: INICIO (HOME) -->
        <section id="page-inicio" class="page p-4 md:p-10 animate__animated animate__fadeIn">
            <!-- DESTACADOS -->
            <div class="mb-12">
                <div class="flex items-center gap-3 mb-6">
                    <div class="h-8 w-2 bg-red-600 rounded-full"></div>
                    <h2 class="text-2xl md:text-3xl font-black uppercase italic">Ofertas que Queman</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-ofertas-home"></div>
            </div>

            <!-- FILTROS -->
            <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4 border-t pt-10">
                <h2 class="text-3xl font-black uppercase italic">Nuestra Tienda</h2>
                <div class="flex gap-2 overflow-x-auto w-full md:w-auto hide-scroll pb-2" id="category-filters">
                    <button onclick="filterProducts('Todos')" class="cat-btn bg-orange-600 text-white px-6 py-2 rounded-full whitespace-nowrap text-sm font-bold shadow-md">Todos</button>
                    <button onclick="filterProducts('Almacén')" class="cat-btn bg-white border px-6 py-2 rounded-full whitespace-nowrap text-sm font-bold">Almacén</button>
                    <button onclick="filterProducts('Fiambrería')" class="cat-btn bg-white border px-6 py-2 rounded-full whitespace-nowrap text-sm font-bold">Fiambrería</button>
                    <button onclick="filterProducts('Bebidas')" class="cat-btn bg-white border px-6 py-2 rounded-full whitespace-nowrap text-sm font-bold">Bebidas</button>
                    <button onclick="filterProducts('Kiosko')" class="cat-btn bg-white border px-6 py-2 rounded-full whitespace-nowrap text-sm font-bold">Kiosko</button>
                    <button onclick="filterProducts('Variedades')" class="cat-btn bg-white border px-6 py-2 rounded-full whitespace-nowrap text-sm font-bold">Variedades</button>
                </div>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6" id="grid-productos"></div>

            <!-- EXTRA SERVICES -->
            <div class="mt-20 p-8 bg-orange-50 rounded-[40px] border-2 border-orange-100 flex flex-wrap items-center justify-center gap-12">
                <div class="flex flex-col items-center gap-2"><i class="fas fa-credit-card text-2xl text-blue-600"></i> <span class="text-xs font-black uppercase">Carga Virtual</span></div>
                <div class="flex flex-col items-center gap-2"><i class="fas fa-bus text-2xl text-cyan-600"></i> <span class="text-xs font-black uppercase">Carga SUBE</span></div>
                <div class="flex flex-col items-center gap-2"><i class="fas fa-bolt text-2xl text-yellow-600"></i> <span class="text-xs font-black uppercase">Pago de Servicios</span></div>
                <div class="flex flex-col items-center gap-2"><i class="fas fa-plug text-2xl text-red-600"></i> <span class="text-xs font-black uppercase">Electrodomésticos</span></div>
            </div>
        </section>

        <!-- SECCIÓN: FOLLETO -->
        <section id="page-folleto" class="page hidden p-4 md:p-10 animate__animated animate__fadeIn">
            <div class="max-w-4xl mx-auto text-center mb-10">
                <h2 class="text-4xl font-black text-orange-600 mb-2 uppercase">La Revista de MaxialmacenExe</h2>
                <p class="text-gray-500 mb-6 font-bold">verano 2026 - Edición Coleccionable</p>
                <div class="bg-yellow-400 p-10 rounded-[40px] shadow-2xl rotate-1 max-w-sm mx-auto">
                    <p class="logo-font text-6xl text-red-600">MAXIALMACEN</p>
                    <p class="font-black italic text-xl mb-4">¡OFERTAS DE BARRIO!</p>
                    <div class="border-t-4 border-black pt-4">
                        <p class="text-xs font-bold uppercase mb-2">Este mes:</p>
                        <p class="font-black">Pavas Eléctricas y Maquillaje con 20% OFF</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN: NOSOTROS (Responsiva) -->
        <section id="page-nosotros" class="page hidden p-4 md:p-10 animate__animated animate__fadeIn">
            <div class="max-w-5xl mx-auto">
                <div class="grid md:grid-cols-2 gap-10 items-center bg-white p-6 md:p-12 rounded-[40px] shadow-sm border border-orange-100">
                    <div>
                        <div class="inline-block bg-orange-100 text-orange-600 px-4 py-1 rounded-full text-xs font-black mb-4 tracking-widest uppercase">Tradición Familiar</div>
                        <h2 class="text-3xl md:text-4xl font-black mb-6">MÁS QUE UN ALMACÉN, UNA FAMILIA</h2>
                        <p class="text-gray-600 text-base md:text-lg mb-6 leading-relaxed">
                            En <strong>MAXIALMACENEXE</strong> no solo vendemos productos, brindamos soluciones para tu día a día. Desde el pan de la mañana hasta ese regalo de último momento o el pago de tus facturas. Atendido por sus dueños con el cariño de siempre.
                        </p>
                        <div class="flex items-center gap-4 p-4 bg-gray-50 rounded-3xl mb-8">
                            <div class="bg-orange-600 text-white w-12 h-12 rounded-full flex items-center justify-center text-xl font-black italic">R</div>
                            <div>
                                <p class="font-black text-orange-600">"Acá se atiende con amor"</p>
                                <p class="text-xs text-gray-400">— Karen,Exequiel y Milton Fundadores</p>
                            </div>
                        </div>
                    </div>
                    <div class="aspect-square md:h-full min-h-[300px] rounded-[30px] overflow-hidden border-4 border-white shadow-xl">
                        <img src="fachada1.jpg" class="w-full h-full object-cover">
                    </div>
                </div>
            </div>
        </section>

        <!-- SECCIÓN: COMO COMPRAR -->
        <section id="page-como-comprar" class="page hidden p-4 md:p-10 animate__animated animate__fadeIn">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl font-black text-dark mb-12 uppercase italic">¿Cómo hago mi pedido?</h2>
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="how-to-card bg-white p-8 rounded-[30px] shadow-sm border border-gray-100">
                        <div class="w-16 h-16 bg-orange-100 text-orange-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-6 font-black">1</div>
                        <h3 class="font-black mb-3">ELEGÍ</h3>
                        <p class="text-sm text-gray-500">Navegá por las categorías y agregá al carrito lo que necesites.</p>
                    </div>
                    <div class="how-to-card bg-white p-8 rounded-[30px] shadow-sm border border-gray-100">
                        <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-6 font-black">2</div>
                        <h3 class="font-black mb-3">DATOS</h3>
                        <p class="text-sm text-gray-500">Completá tu nombre y elegí si querés envío o retirar en el local.</p>
                    </div>
                    <div class="how-to-card bg-white p-8 rounded-[30px] shadow-sm border border-gray-100">
                        <div class="w-16 h-16 bg-green-100 text-green-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-6 font-black">3</div>
                        <h3 class="font-black mb-3">WHATSAPP</h3>
                        <p class="text-sm text-gray-500">Hacé click en el botón verde y envianos el mensaje generado.</p>
                    </div>
                </div>
                <div class="mt-12 p-6 bg-dark text-white rounded-3xl inline-block">
                    <p class="font-bold"><i class="fas fa-info-circle mr-2 text-orange-500"></i> Aceptamos Efectivo, Transferencia y Cuenta DNI</p>
                </div>
            </div>
        </section>
    </main>

    <!-- FOOTER -->
    <footer class="bg-dark text-white pt-16 pb-24 md:pb-12 mt-20">
        <div class="container mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12">
            <div class="col-span-1 md:col-span-1">
                <p class="logo-font text-4xl text-orange-600 mb-4">EXE</p>
                <p class="text-gray-400 text-sm leading-relaxed">Tu almacén amigo. Calidad, confianza y variedad en un solo lugar.</p>
                <div class="flex gap-4 mt-6">
                    <a href="#" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-orange-600 transition"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-orange-600 transition"><i class="fab fa-facebook"></i></a>
                </div>
            </div>
            <div>
                <h4 class="font-black uppercase mb-6 text-orange-600">Categorías</h4>
                <ul class="space-y-3 text-sm text-gray-400 font-bold">
                    <li><a href="#" onclick="filterProducts('Almacén')">Almacén</a></li>
                    <li><a href="#" onclick="filterProducts('Variedades')">Variedades & Bijou</a></li>
                    <li><a href="#" onclick="filterProducts('Variedades')">Maquillaje</a></li>
                    <li><a href="#" onclick="filterProducts('Kiosko')">Golosinas</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-black uppercase mb-6 text-orange-600">Horarios</h4>
                <ul class="space-y-3 text-sm text-gray-400 font-bold">
                    <li>Lunes a Viernes: 08:00 - 23:00</li>
                    <li>Sábados: 09:00 - 22:00</li>
                    <li>Domingos: 09:00 - 22:00</li>
                </ul>
            </div>
            <div>
                <h4 class="font-black uppercase mb-6 text-orange-600">Ubicación</h4>
                <p class="text-sm text-gray-400 font-bold mb-4">Argentina 4929,La Tablada</p>
                <div class="bg-white/5 p-4 rounded-2xl border border-white/10">
                    <p class="text-[10px] uppercase font-black text-gray-500">Pedidos al WhatsApp</p>
                    <p class="text-lg font-black">+54 9 11 53335906</p>
                </div>
            </div>
        </div>
        <div class="container mx-auto px-6 mt-16 pt-8 border-t border-white/10 text-center text-xs text-gray-500 font-bold">
            &copy; 2026 MAXIALMACENEXE - DISEÑO CON AMOR VECINAL
        </div>
    </footer>

    <!-- CARRITO DRAWER -->
       <div class="cart-overlay" id="cart-overlay" onclick="toggleCart()"></div>
    <div id="cart-drawer" class="cart-drawer">
        <div class="p-6 bg-orange-600 text-white flex justify-between items-center">
            <div class="flex items-center gap-3">
                <button onclick="toggleCart()" class="cerrar-btn">CERRAR</button><i class="fas fa-arrow-left"></i></button>
                <h2 class="text-2xl font-black italic">MI PEDIDO</h2>
            </div>
            <button onclick="toggleCart()" class="text-sm font-bold border border-white/30 px-3 py-1 rounded-full">CERRAR</button>
        </div>
        
        <div id="cart-items" class="flex-grow overflow-y-auto p-6 space-y-4"></div>

        <div id="cart-form" class="px-6 py-4 bg-gray-50 border-t space-y-3">
            <input type="text" id="customer-name" placeholder="Tu Nombre" class="w-full p-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-orange-600 outline-none text-sm font-bold">
            <div class="grid grid-cols-2 gap-3">
                <button onclick="setDelivery('envio')" id="btn-envio" class="delivery-opt p-3 border-2 border-orange-600 bg-white rounded-xl text-xs font-bold flex flex-col items-center gap-1 transition">
                    <i class="fas fa-motorcycle text-lg"></i> ENVÍO
                </button>
                <button onclick="setDelivery('retiro')" id="btn-retiro" class="delivery-opt p-3 border-2 border-gray-200 bg-white rounded-xl text-xs font-bold flex flex-col items-center gap-1 transition">
                    <i class="fas fa-store text-lg"></i> RETIRO
                </button>
            </div>
            <input type="text" id="customer-address" placeholder="Dirección de entrega" class="w-full p-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-orange-600 outline-none text-sm font-bold">
        </div>

        <div class="p-6 border-t bg-white">
            <div class="flex justify-between items-end mb-4">
                <div>
                    <p class="text-gray-400 text-[10px] font-black uppercase">Total a pagar</p>
                    <p id="cart-total-drawer" class="text-4xl font-black text-dark">$0</p>
                </div>
                <button onclick="toggleCart()" class="text-orange-600 font-bold text-xs underline">Seguir comprando</button>
            </div>
            <button onclick="checkout()" class="w-full bg-green-600 text-white py-5 rounded-2xl text-xl font-black btn-bounce flex items-center justify-center gap-3 shadow-xl">
                PEDIR POR WHATSAPP <i class="fab fa-whatsapp text-2xl"></i>
            </button>
        </div>
    </div>

    <!-- PANTALLA ÉXITO -->
    <div id="success-screen" class="fixed inset-0 bg-black/80 backdrop-blur-lg z-[2000] items-center justify-center p-6 hidden">
        <div class="success-card text-center max-w-sm">
            <div class="w-24 h-24 bg-green-500 text-white rounded-full flex items-center justify-center text-4xl mx-auto mb-6"><i class="fas fa-heart"></i></div>
            <h2 class="text-3xl font-black mb-2 uppercase italic">¡VAMOS TODAVÍA!</h2>
            <p class="text-gray-600 mb-8">Redirigiendo a WhatsApp para confirmar el pedido...</p>
            <button onclick="location.reload()" class="w-full bg-dark text-white py-4 rounded-xl font-bold">VOLVER AL INICIO</button>
        </div>
    </div>

    <!-- NAV BOTTOM MOBILE -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white flex justify-around items-center h-16 z-[60] md:hidden border-t shadow-[0_-5px_15px_rgba(0,0,0,0.1)]">
        <button onclick="showPage('inicio')" class="flex flex-col items-center text-orange-600">
            <i class="fas fa-home text-xl"></i>
            <span class="text-[10px] font-bold">TIENDA</span>
        </button>
        <button onclick="showPage('nosotros')" class="flex flex-col items-center text-gray-400">
            <i class="fas fa-users text-xl"></i>
            <span class="text-[10px] font-bold">NOSOTROS</span>
        </button>
        <button onclick="showPage('como-comprar')" class="flex flex-col items-center text-gray-400">
            <i class="fas fa-info-circle text-xl"></i>
            <span class="text-[10px] font-bold">AYUDA</span>
        </button>
        <button onclick="toggleCart()" class="flex flex-col items-center text-gray-400">
            <div class="relative">
                <i class="fas fa-shopping-cart text-xl"></i>
                <span class="cart-count-badge absolute -top-2 -right-2 bg-orange-600 text-white text-[8px] w-4 h-4 rounded-full flex items-center justify-center">0</span>
            </div>
            <span class="text-[10px] font-bold">PEDIDO</span>
        </button>
    </nav>

    <script>
        const productos = [
            { id: 1, nombre: "Aceite Pureza", precio: 8500, img: "aceite.jpg", cat: "Almacén", desc: "Primera prensada en frío." },
            { id: 2, nombre: "Yerba Playadito 1kg", precio: 4200, img: "yerbas.jpg", cat: "Almacén", oferta: true, desc: "Sabor suave." },
            { id: 4, nombre: "Manaos Cola", precio: 1400, img: "manaoscola.png", cat: "Bebidas", oferta: true, desc: "Cuerpo intenso." },
            { id: 15, nombre: "Tazas emociones", precio: 32000, img: "tazas.jpg", cat: "Variedades", desc: "Corte automático para mate." },
            { id: 16, nombre: "Collares Corazón", precio: 15400, img: "bijuteria1.jpg", cat: "Variedades", desc: "Incluye sombras y brochas." },
            { id: 17, nombre: "Combo Fiambre", precio: 4500, img: "fiambre.png", cat: "Variedades", desc: "Bijouterie de alta calidad." },
            { id: 18, nombre: "Alfajor Havanna 70%", precio: 2200, img: "alfajores.jpg", cat: "Kiosko", oferta: true, desc: "El rey de los alfajores." },
            { id: 19, nombre: "Yogurt Durazno", precio: 1800, img: "yogurtdurazno.jpg", cat: "Kiosko", desc: "Mix frutal." },
            { id: 20, nombre: "Aromatizantes", precio: 6200, img: "aromatizantes.jpg", cat: "Variedades", desc: "Larga duración." }
        ];

        let cart = [];
        let currentCat = 'Todos';
        let deliveryMethod = 'envio';
        let searchTerm = '';

        function render(items = productos) {
            const grid = document.getElementById('grid-productos');
            const filteredItems = items.filter(p => 
                p.nombre.toLowerCase().includes(searchTerm.toLowerCase()) || 
                p.cat.toLowerCase().includes(searchTerm.toLowerCase())
            );

            grid.innerHTML = filteredItems.map(p => {
                const cartItem = cart.find(c => c.id === p.id);
                const qty = cartItem ? cartItem.qty : 0;
                
                return `
                <div class="product-card p-4 flex flex-col animate__animated animate__fadeIn">
                    <div class="relative overflow-hidden rounded-2xl mb-3">
                        <img src="${p.img}" class="w-full h-40 object-cover">
                        ${p.oferta ? `<div class="absolute top-2 left-2 bg-red-600 text-white text-[9px] font-black px-3 py-1 rounded-full">OFERTA</div>` : ''}
                    </div>
                    <p class="text-[9px] text-gray-400 font-bold uppercase mb-1">${p.cat}</p>
                    <h3 class="font-bold text-sm leading-tight h-10">${p.nombre}</h3>
                    <div class="mt-auto">
                        <span class="font-black text-lg text-dark block mb-3">$${p.precio.toLocaleString()}</span>
                        <div id="btn-container-${p.id}">
                            ${qty > 0 ? `
                                <div class="flex items-center bg-gray-100 rounded-xl p-1 justify-between">
                                    <button onclick="changeQty(${p.id}, -1)" class="w-8 h-8 bg-white rounded-lg shadow-sm flex items-center justify-center text-orange-600 font-bold">-</button>
                                    <span class="font-black">${qty}</span>
                                    <button onclick="changeQty(${p.id}, 1)" class="w-8 h-8 bg-white rounded-lg shadow-sm flex items-center justify-center text-orange-600 font-bold">+</button>
                                </div>
                            ` : `
                                <button onclick="addToCart(${p.id})" class="btn-visible text-xs btn-bounce uppercase">
                                    <i class="fas fa-plus"></i> Agregar
                                </button>
                            `}
                        </div>
                    </div>
                </div>`;
            }).join('');

            const offersHome = document.getElementById('grid-ofertas-home');
            if (offersHome) {
                offersHome.innerHTML = productos.filter(p => p.oferta).slice(0, 3).map(p => `
                    <div onclick="addToCart(${p.id})" class="bg-white p-6 rounded-[30px] border-2 border-red-100 flex items-center gap-4 cursor-pointer hover:border-red-500 transition shadow-sm relative overflow-hidden group">
                        <img src="${p.img}" class="w-16 h-16 rounded-2xl object-cover">
                        <div>
                            <h4 class="font-bold text-xs uppercase">${p.nombre}</h4>
                            <p class="text-xl font-black text-red-600">$${p.precio.toLocaleString()}</p>
                        </div>
                        <div class="absolute right-4 text-red-100 text-3xl group-hover:text-red-500 transition"><i class="fas fa-plus-circle"></i></div>
                    </div>
                `).join('');
            }
        }

        function handleSearch() {
            const input = document.getElementById('search-input');
            const inputMobile = document.getElementById('search-input-mobile');
            searchTerm = input.value || inputMobile.value;
            render(currentCat === 'Todos' ? productos : productos.filter(p => p.cat === currentCat));
        }

        function filterProducts(cat) {
            currentCat = cat;
            document.querySelectorAll('.cat-btn').forEach(btn => {
                const isActive = btn.innerText === cat;
                btn.classList.toggle('bg-orange-600', isActive);
                btn.classList.toggle('text-white', isActive);
                btn.classList.toggle('bg-white', !isActive);
                btn.classList.toggle('border', !isActive);
            });
            render(cat === 'Todos' ? productos : productos.filter(p => p.cat === cat));
            showPage('inicio');
        }

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            document.getElementById(`page-${id}`).classList.remove('hidden');
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function toggleCart() {
    const cartDrawer = document.getElementById('cart-drawer');
    const cartOverlay = document.getElementById('cart-overlay');
    
    // Esto agrega o quita la clase "open" a ambos al mismo tiempo
    cartDrawer.classList.toggle('open');
    cartOverlay.classList.toggle('open');

    // Opcional: Evita que el fondo de la página se mueva cuando el carrito está abierto
    if (cartDrawer.classList.contains('open')) {
        document.body.style.overflow = 'hidden';
    } else {
        document.body.style.overflow = 'auto';
    }
}
        }

        function addToCart(id) {
            const p = productos.find(x => x.id === id);
            const exists = cart.find(x => x.id === id);
            if(exists) exists.qty++;
            else cart.push({...p, qty: 1});
            updateCart();
            confetti({ particleCount: 30, spread: 50, origin: { y: 0.9 }, colors: ['#FF3D00'] });
        }

        function removeItem(id) {
            cart = cart.filter(x => x.id !== id);
            updateCart();
        }

        function changeQty(id, delta) {
            const item = cart.find(x => x.id === id);
            if(!item) return;
            item.qty += delta;
            if(item.qty <= 0) cart = cart.filter(x => x.id !== id);
            updateCart();
        }

        function updateCart() {
            const container = document.getElementById('cart-items');
            const total = cart.reduce((acc, x) => acc + (x.precio * x.qty), 0);
            const count = cart.reduce((acc, x) => acc + x.qty, 0);

            document.querySelectorAll('.cart-count-badge').forEach(el => el.innerText = count);
            const badgeMobile = document.getElementById('cart-badge-mobile');
            if(badgeMobile) badgeMobile.innerText = count;

            document.getElementById('cart-total-header').innerText = `$${total.toLocaleString()}`;
            document.getElementById('cart-total-drawer').innerText = `$${total.toLocaleString()}`;

            if(cart.length === 0) {
                container.innerHTML = `<div class="text-center py-20 text-gray-300 font-bold"><i class="fas fa-shopping-basket text-6xl mb-4"></i><p>TU CARRITO ESTÁ VACÍO</p></div>`;
            } else {
                container.innerHTML = cart.map(item => `
                    <div class="flex items-center gap-4 bg-gray-50 p-3 rounded-2xl border border-gray-100 group relative">
                        <img src="${item.img}" class="w-12 h-12 rounded-lg object-cover">
                        <div class="flex-grow">
                            <h4 class="font-bold text-[11px] uppercase">${item.nombre}</h4>
                            <p class="text-orange-600 font-black text-sm">$${(item.precio * item.qty).toLocaleString()}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="changeQty(${item.id}, -1)" class="w-7 h-7 bg-white border rounded-full text-xs font-black">-</button>
                            <span class="text-xs font-black w-4 text-center">${item.qty}</span>
                            <button onclick="changeQty(${item.id}, 1)" class="w-7 h-7 bg-white border rounded-full text-xs font-black">+</button>
                            <button onclick="removeItem(${item.id})" class="ml-2 text-gray-300 hover:text-red-500 transition"><i class="fas fa-trash-alt"></i></button>
                        </div>
                    </div>
                `).join('');
            }
            render(currentCat === 'Todos' ? productos : productos.filter(p => p.cat === currentCat));
        }

        function setDelivery(type) {
            deliveryMethod = type;
            document.getElementById('btn-envio').classList.toggle('border-orange-600', type === 'envio');
            document.getElementById('btn-retiro').classList.toggle('border-orange-600', type === 'retiro');
            document.getElementById('customer-address').style.display = type === 'envio' ? 'block' : 'none';
        }

        function checkout() {
            const name = document.getElementById('customer-name').value;
            const address = document.getElementById('customer-address').value;

            if(!name) {
                alert("Por favor, dejanos tu nombre.");
                return;
            }
            if(deliveryMethod === 'envio' && !address) {
                alert("Por favor, ingresá tu dirección.");
                return;
            }
            if(cart.length === 0) return;
            
            let msj = `¡Hola ALMA! 👋 Mi nombre es *${name}*.\nQuiero hacer un pedido:\n\n`;
            cart.forEach(item => msj += `• ${item.qty}x ${item.nombre} ($${(item.precio * item.qty).toLocaleString()})\n`);
            msj += `\n📦 *Método: ${deliveryMethod === 'envio' ? 'Envío a domicilio' : 'Retiro en Local'}*`;
            if(deliveryMethod === 'envio') msj += `\n📍 *Dirección: ${address}*`;
            msj += `\n💰 *Total: ${document.getElementById('cart-total-drawer').innerText}*`;

            const waUrl = `https://wa.me/5491153335906?text=${encodeURIComponent(msj)}`;

            document.getElementById('success-screen').classList.replace('hidden', 'flex');
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });

            setTimeout(() => { window.open(waUrl, '_blank'); }, 2000);
        }

        // Init
        setDelivery('envio');
        render();
    </script>
</body>

</html>






